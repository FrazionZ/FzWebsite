import{W as y,a as t,j as s,d as p,r as d,b as A,n as w,F as g}from"./app-8ad97735.js";import{L as M}from"./Layout-e90d5073.js";import{e as _}from"./Toast-48186346.js";import k from"./Settings-239d357a.js";import{B as b}from"./Badge-fe6de0ff.js";import{m as N}from"./fr-7c58bf92.js";import{S as L}from"./Spinner-f3146b00.js";import{P as v}from"./pnotes-8a5673d8.js";import{C as S}from"./comment-pen-d2ca9284.js";import{A as n}from"./Alert-f9231947.js";import"./logo-ec0c8240.js";import"./FzToastContainer-b56ef26f.js";import"./FzToast-68187294.js";import"./bubble_warning-9cee2399.js";import"./bubble_infos-3d3cb710.js";import"./motion-60d2c529.js";import"./Dropdown-26707dbc.js";import"./iconBase-29a91d14.js";import"./index-a45f2cb9.js";/* empty css            */import"./twitch-4fc69974.js";import"./index.esm-fa79e6a0.js";import"./switch-d8374f62.js";import"./index-4d501b15.js";const j="/build/assets/eye-c899f3f2.svg",z="/build/assets/eye-crossed-14d010dd.svg";N.locale("fr");function J({funcParse:l,candid:e,canManage:r}){y().props;function a(i){return i.replaceAll("January","Janvier").replaceAll("February","Février").replaceAll("March","Mars").replaceAll("April","Avril").replaceAll("May","Mai").replaceAll("June","Juin").replaceAll("July","Julliet").replaceAll("August","Août").replaceAll("September","Septembre").replaceAll("October","Octobre").replaceAll("November","Novembre").replaceAll("December","Décembre")}return t("div",{className:"card candidate item",children:s("div",{className:"card-body",children:[s("div",{className:"infos",children:[s("div",{className:"general",children:[s("div",{className:"username",children:[t(_,{content:e.public?"Public":"Non public",children:t("img",{style:{width:"32px"},src:e.public?j:z,alt:""})}),t("span",{children:e.upseudo})]}),s("span",{className:"date",children:["Publié le ",a(N(e.created_at).local("fr").tz("Europe/Paris").format("D MMMM YYYY"))]})]}),s("div",{className:"tag",children:[e.state==2&&e.substate==1&&t(b,{state:"error",size:"sm",message:"Refusée"}),e.state==2&&e.substate==0&&t(b,{state:"success",message:"Acceptée",size:"sm"})]})]}),s("div",{className:"actions",children:[t(p,{className:"btn",href:route("candidate.show",{id:e.id}),children:"Visionner"}),r==!0&&t(k,{funcParse:l,candid:e})]})]})})}function F({funcParse:l,category:e}){const[r,a]=d.useState(e.candids.prev_page_url),[i,c]=d.useState(e.candids.current_page),[u,m]=d.useState(e.candids.next_page_url);async function h(P){a(null),m(null),l.setLoading(e.id,!0).then(async()=>{let f=P=="prev"?i-1:i+1,o=await axios.get("/candidate/paginate/"+e.id+"/"+f);o.status==200&&(a(o.data.prev_page_url),m(o.data.next_page_url),c(f),l.setPageCategory(e.id,o.data)),l.setLoading(e.id,!1)})}return s("div",{className:"paginate candidate",children:[t("button",{className:"btn",onClick:()=>{h("prev")},disabled:r==null,children:"<"}),t("button",{className:"btn",children:i}),t("button",{className:"btn",onClick:()=>{h("next")},disabled:u==null,children:">"})]})}const C="/build/assets/clock-0fa3135e.svg",x="/build/assets/time_fast-564a17ef.svg";class ie extends A.Component{constructor(e){super(e),this.title="Rejoindre notre équipe";for(const[r,a]of this.props.categories.entries())switch(r){case 0:a.icon=C,a.load=!1;break;case 1:a.icon=x,a.load=!1;break;case 2:a.icon=v,a.load=!1;break}this.state={categories:this.props.categories},this.reloadCandidature=this.reloadCandidature.bind(this),this.setPageCategory=this.setPageCategory.bind(this),this.setLoading=this.setLoading.bind(this),this.funcParse={setLoading:this.setLoading,reloadCandidature:this.reloadCandidature,setPageCategory:this.setPageCategory}}async initCategory(e){for await(const[r,a]of e.entries())switch(r){case 0:a.icon=C,a.load=!1;break;case 1:a.icon=x,a.load=!1;break;case 2:a.icon=v,a.load=!1;break}return e}async setLoading(e,r){let a=this.state.categories,i=a[e];return i.load=r,new Promise((c,u)=>{this.setState({categories:a},c())})}async setPageCategory(e,r){let a=this.state.categories,i=a[e];i.candids=r,this.setState({categories:a})}async reloadCandidature(e){let r=await this.initCategory(e);this.setState({categories:r})}render(){return s(M,{title:this.title,props:this.props,children:[t(w,{title:this.title}),s("div",{className:"flex flex-col gap-[120px]",children:[s("div",{className:"flex gap-[30px] flex-col items-center",children:[s("div",{className:"justify-start icon_title w-full",children:[t("img",{src:S,alt:""}),t("span",{children:"Candidater"})]}),this.props.feature==!1&&t(n,{className:"w-full",state:"error",children:"Les Candidatures sont temporairement désactivées."}),this.props.feature==!0&&this.props.candidCooldown==!0&&t(n,{className:"w-full",state:"error",children:"Votre précédente candidature a été traitée. Vous devez attendre 30 jours avant de postuler à nouveau"}),this.props.feature==!0&&this.props.candidAlreadyPost==!0&&t(n,{className:"w-full",state:"error",children:"Vous avez déjà envoyé une candidature, vous ne pouvez plus en poster pour le moment."}),this.props.feature==!0&&this.props.candidAlreadyPost==!1&&this.props.candidCooldown==!1&&s(g,{children:[t(n,{state:"infos",className:"w-full",children:s("span",{children:["Pour rejoindre notre équipe, merci de remplir le formulaire ci-dessous. Merci de suivre un maximum les conditions pour postuler.",t("br",{}),"Les conditions, et un exemple, sont présents sur ",t(p,{href:"#",children:"cette page."})]})}),t(p,{href:route("candidate.create"),className:"btn",children:"Postuler Maintenant"})]})]}),t("div",{className:"flex gap-[60px] flex-col",children:this.state.categories.map((e,r)=>s("div",{className:"flex flex-col gap-[30px]",children:[s("div",{className:"icon_title",children:[t("img",{src:e.icon,alt:""}),t("span",{children:e.display})]}),s("div",{className:"column flex flex-col gap-[24px]",children:[t(n,{state:"infos",children:e.info}),e.load==!0&&t(g,{children:s("div",{className:"flex justify-center items-center gap-5 py-20",children:[t(L,{"aria-label":"Center-aligned spinner example"}),t("span",{className:"text-xl",children:"Chargement"})]})}),e.load==!1&&e.candids.data.map((a,i)=>t(J,{funcParse:this.funcParse,canManage:this.props.canManageCandidate,candid:a},i)),t(F,{funcParse:this.funcParse,category:e})]})]},r))})]})]})}}export{ie as default};
