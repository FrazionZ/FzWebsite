import{r as c,R as b,K as I,j as d,a as l,n as U,F as V,f as _}from"./app-a100f4fa.js";import{s as q,L as z,a as G}from"./Layout-a63ed908.js";import{C as S}from"./comment-pen-639ffa00.js";import{A as K}from"./Alert-5dfa3029.js";import{M as B}from"./Editor-83f74616.js";import{o as x,V as E,y as $,l as H,X as k,a as Y,P as X}from"./transition-3a9192b0.js";import{I as P,r as Z,o as T}from"./use-owner-1c11913e.js";import{F as J,k as Q,h as W,s as ee}from"./description-cd66e896.js";import"./index-4d501b15.js";import"./react-markdown-66a17427.js";function te(t){var r;let n=(r=t==null?void 0:t.form)!=null?r:t.closest("form");if(n){for(let a of n.elements)if(a.tagName==="INPUT"&&a.type==="submit"||a.tagName==="BUTTON"&&a.type==="submit"||a.nodeName==="INPUT"&&a.type==="image"){a.click();return}}}function re(t,r,n){let[a,o]=c.useState(n),e=t!==void 0,i=c.useRef(e),s=c.useRef(!1),m=c.useRef(!1);return e&&!i.current&&!s.current?(s.current=!0,i.current=e,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!e&&i.current&&!m.current&&(m.current=!0,i.current=e,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[e?t:a,x(h=>(e||o(h),r==null?void 0:r(h)))]}let D=c.createContext(null);function j(){let t=c.useContext(D);if(t===null){let r=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(r,j),r}return t}function le(){let[t,r]=c.useState([]);return[t.length>0?t.join(" "):void 0,c.useMemo(()=>function(n){let a=x(e=>(r(i=>[...i,e]),()=>r(i=>{let s=i.slice(),m=s.indexOf(e);return m!==-1&&s.splice(m,1),s}))),o=c.useMemo(()=>({register:a,slot:n.slot,name:n.name,props:n.props}),[a,n.slot,n.name,n.props]);return b.createElement(D.Provider,{value:o},n.children)},[r])]}let ae="label",ne=E(function(t,r){let n=P(),{id:a=`headlessui-label-${n}`,passive:o=!1,...e}=t,i=j(),s=$(r);H(()=>i.register(a),[a,i.register]);let m={ref:s,...i.props,id:a};return o&&("onClick"in m&&delete m.onClick,"onClick"in e&&delete e.onClick),k({ourProps:m,theirProps:e,slot:i.slot||{},defaultTag:ae,name:i.name||"Label"})}),N=c.createContext(null);N.displayName="GroupContext";let ie=c.Fragment;function se(t){let[r,n]=c.useState(null),[a,o]=le(),[e,i]=Q(),s=c.useMemo(()=>({switch:r,setSwitch:n,labelledby:a,describedby:e}),[r,n,a,e]),m={},h=t;return b.createElement(i,{name:"Switch.Description"},b.createElement(o,{name:"Switch.Label",props:{onClick(){!r||(r.click(),r.focus({preventScroll:!0}))}}},b.createElement(N.Provider,{value:s},k({ourProps:m,theirProps:h,defaultTag:ie,name:"Switch.Group"}))))}let oe="button",ce=E(function(t,r){let n=P(),{id:a=`headlessui-switch-${n}`,checked:o,defaultChecked:e=!1,onChange:i,name:s,value:m,...h}=t,f=c.useContext(N),u=c.useRef(null),g=$(u,r,f===null?null:f.setSwitch),[v,y]=re(o,i,e),C=x(()=>y==null?void 0:y(!v)),L=x(p=>{if(Z(p.currentTarget))return p.preventDefault();p.preventDefault(),C()}),M=x(p=>{p.key===T.Space?(p.preventDefault(),C()):p.key===T.Enter&&te(p.currentTarget)}),F=x(p=>p.preventDefault()),R=c.useMemo(()=>({checked:v}),[v]),A={id:a,ref:g,role:"switch",type:q(t,u),tabIndex:0,"aria-checked":v,"aria-labelledby":f==null?void 0:f.labelledby,"aria-describedby":f==null?void 0:f.describedby,onClick:L,onKeyUp:M,onKeyPress:F},O=Y();return c.useEffect(()=>{var p;let w=(p=u.current)==null?void 0:p.closest("form");!w||e!==void 0&&O.addEventListener(w,"reset",()=>{y(e)})},[u,y]),b.createElement(b.Fragment,null,s!=null&&v&&b.createElement(W,{features:ee.Hidden,...X({as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:v,name:s,value:m})}),k({ourProps:A,theirProps:h,slot:R,defaultTag:oe,name:"Switch"}))}),ue=Object.assign(ce,{Group:se,Label:ne,Description:J});function ke(t){let r="Candidature";t.auth;const n=15,a=90,{data:o,setData:e,post:i,processing:s,errors:m}=I({age:n,rank:"helper",discordTag:"",public:!0,present:"",_token:t.csrf_token});async function h(){const u=Math.max(n,Math.min(a,Number(event.target.value)));e("age",u)}async function f(u){u.preventDefault(),i(route("candidate.handleCreate"),{preserveScroll:!0,preserveState:!0,resetOnSuccess:!0,onFinish:g=>{console.log(g)},onSuccess:g=>{console.log(g)},onError:g=>{console.log(g),G.flash(g)}})}return d(z,{title:r,props:t,children:[l(U,{title:r}),d("form",{onSubmit:f,className:"flex flex-col gap-[120px]",children:[d("div",{className:"flex flex-col gap-[30px]",children:[d("div",{className:"justify-start icon_title w-full",children:[l("img",{src:S,alt:""}),l("span",{children:"Candidater"})]}),t.feature==!1&&l(K,{state:"error",message:"Les candidatures sont temporairement désactivées"}),t.feature==!0&&d(V,{children:[l("div",{className:"alert infos w-full",children:d("span",{children:["Pour rejoindre notre équipe, merci de remplir le formulaire ci-dessous. ",l("br",{}),"Merci de suivre un maximum les conditions pour postuler.",l("br",{}),"Les conditions, et un exemple, sont présents sur ",l(_,{href:"#",children:"cette page."})]})}),d("div",{className:"flex gap-8",children:[d("div",{className:"form-group w-1/6",children:[l("label",{children:"Votre âge"}),l("input",{type:"number",className:"text-center",disabled:s,value:o.age,onChange:h})]}),d("div",{className:"form-group w-full",children:[l("label",{children:"Rôle souhaité"}),l("select",{name:"rank",value:o.rank,disabled:s,onChange:u=>{e("rank",u.target.value)},children:l("option",{value:"helper",children:"Helper"})})]})]}),d("div",{className:"flex gap-8 w-full",children:[d("div",{className:"form-group w-full",children:[l("label",{children:"Votre Tag Discord"}),l("input",{type:"text",className:"discord",disabled:s,value:o.discordTag,placeholder:"SuberBob3000#9999",onChange:u=>{e("discordTag",u.target.value)}})]}),d("div",{className:"form-group w-full",children:[l("label",{children:"Visibilité"}),d("div",{className:"flex items-center gap-6 h-full",children:[l(ue,{checked:o.public,disabled:s,onChange:u=>{e("public",u)},className:`${o.public?"":"bg-[var(--fzbg-3)]"} relative inline-flex h-6 w-11 items-center rounded-full`,children:l("span",{className:`${o.public?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition`})}),l("span",{className:"text-base",children:"Souhaitez-vous que votre candidature soit publique ?"})]})]})]})]})]}),d("div",{className:"flex flex-col gap-[30px]",children:[d("div",{className:"justify-start icon_title w-full",children:[l("img",{src:S,alt:""}),l("span",{children:"A toi de jouer !"})]}),l(B,{value:o.present,height:500,disabled:s,onChange:u=>{e("present",u)}})]}),l("div",{className:"flex justify-center",children:l("button",{className:"btn",type:"submit",disabled:s,children:"Envoyer la candidature"})})]})]})}export{ke as default};
