import{a as e,j as a,r as l,K as x,n as N,F as b}from"./app-b9fa2a5c.js";import{L as y}from"./Layout-e5e7eadd.js";import{B as C}from"./FzToastContainer-f656a1dc.js";import{A as i}from"./Alert-d3029ebc.js";import{B as w}from"./Badge-7085deba.js";import{m as S}from"./fr-0f5c5dd3.js";import"./Editor-c41e573d.js";import"./logo-ec0c8240.js";import"./Dropdown-e882e15d.js";/* empty css            */import"./index-4d501b15.js";import"./index.esm-44803543.js";import"./iconBase-090ce01b.js";import"./react-markdown-23313da2.js";S.locale("fr");function _({comment:t}){return e("div",{className:"card candidate comment",children:a("div",{className:"card-body",children:[e("div",{className:"avatar",children:e("img",{src:`https://auth.frazionz.net/skins/face.php?u=${t.uid}`,alt:"avatar_user"})}),a("div",{className:"infos",children:[a("div",{className:"user",children:[e("span",{children:t.user.name}),e(w,{message:t.user.role.name,styleBadge:{background:t.user.role.color}})]}),e("div",{className:"comment",children:t.comment})]})]})})}const j="/build/assets/comments-11cf77fa.svg",k="/build/assets/envelope_open-77985d09.svg";function $(t){let o="Candidature",c=t.auth;const[p,B]=l.useState(t.category),[s,A]=l.useState(t.candidate),[d,f]=l.useState(t.comments);l.useState(!1);const{data:h,setData:m,post:v,processing:u,errors:E}=x({cid:s.id,comment:"",_token:t.csrf_token});async function g(r){r.preventDefault(),v(route("candidate.handleComment"),{preserveScroll:!0,preserveState:!0,onSuccess:n=>{f(n.props.comments),m("comment","")},onError:()=>{}})}return a(y,{title:o,props:t,children:[e(N,{title:o}),a("div",{className:"flex flex-col gap-[120px]",children:[a("div",{className:"flex flex-col gap-[30px]",children:[a("div",{className:"justify-start icon_title w-full",children:[e("img",{src:C,alt:""}),e("span",{children:"Information"})]}),e(i,{state:"infos",message:p.show}),a("div",{className:"flex gap-8",children:[a("div",{className:"form-group w-1/2",children:[e("label",{children:"Pseudo"}),e("input",{type:"text",disabled:!0,value:s.upseudo})]}),a("div",{className:"form-group w-full",children:[e("label",{children:"Rôle souhaité"}),e("input",{type:"text",disabled:!0,value:s.rank})]})]}),(c.isAdmin==!0||c.user.id==s.uid)&&a(b,{children:[a("div",{className:"flex gap-8",children:[a("div",{className:"form-group w-full",children:[a("label",{children:["Tag Discord"," ",e("span",{className:"text-sm",children:"*"})]}),e("input",{type:"text",disabled:!0,value:s.discordtag})]}),a("div",{className:"form-group w-1/2",children:[a("label",{children:["Âge ",e("span",{className:"text-sm",children:"*"})]}),e("input",{type:"text",disabled:!0,value:s.age})]})]}),e("span",{className:"flex justify-end text-sm",children:"*Ces informations ne sont visibles que par vous et le Staff."})]})]}),a("div",{className:"flex flex-col gap-[30px]",children:[a("div",{className:"justify-start icon_title w-full",children:[e("img",{src:k,alt:""}),e("span",{children:"Présentation"})]}),e("div",{className:"card ",children:e("div",{className:"card-body overflow-y-auto max-h-[800px] pr-5",style:{wordWrap:"break-word"},dangerouslySetInnerHTML:{__html:s.present}})})]}),a("div",{className:"flex flex-col gap-[20px]",children:[a("div",{className:"justify-start icon_title w-full",children:[e("img",{src:j,alt:""}),e("span",{children:"Commentaires"})]}),d.map((r,n)=>e(_,{comment:r},n)),d.length==0&&e(i,{state:"infos",message:"Aucun commentaire n'a été posté"}),s.locked==!0&&e(i,{state:"error",message:"Cette candidature est verrouillée, vous ne pouvez plus commenter"}),s.locked==!1&&a("form",{onSubmit:g,className:"flex flex-col gap-5",children:[a("div",{className:"form-group",children:[e("label",{children:"Rédaction de votre commentaire"}),e("textarea",{className:"h-9",disabled:u,value:h.comment,onChange:r=>{m("comment",r.target.value)}})]}),e("button",{type:"submit",disabled:u,className:"flex justify-center btn",children:"Envoyer"})]})]})]})]})}export{$ as default};
