import{r as i,K as x,j as r,a as e,n as k,c as f}from"./app-15af5a0b.js";import{A as v}from"./AdminLayout-88dfcdd5.js";import{m as n}from"./fr-7c016d48.js";import{a as N}from"./Toast-3cb0503b.js";import"./FzToastContainer-fe4013e1.js";import"./logo-ec0c8240.js";import"./index.esm-7fc26bd5.js";n.locale("fr");function z(o){const[t,m]=i.useState(o.user);let c=t.name;const[u,g]=i.useState(o.tokenUsers),{data:d,setData:l,post:p,processing:w,errors:S}=x({id:t.id,username:t.name,email:t.email,money:t.money,banned:t.banned,_token:o.csrf_token});async function h(){const a=Math.max(0,Math.min(999999999,Number(event.target.value)));l("money",a)}async function b(a){a.preventDefault(),p(route("admin.users.edit.save"),{preserveScroll:!0,preserveState:!0,onSuccess:s=>{m(s.props.user)},onError:()=>{}})}async function y(a){f.post(route("admin.users.token.revoke"),a,{preserveState:!0,preserveScroll:!0,resetOnSuccess:!0,onFinish:s=>{},onSuccess:s=>{g(s.props.tokenUsers)},onError:s=>{}})}return r(v,{children:[e(k,{title:c}),r("div",{className:"grid grid-cols-1 px-4 pt-6 xl:grid-cols-3 xl:gap-4 dark:bg-gray-900",children:[e("div",{className:"mb-4 col-span-full xl:mb-2",children:e("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Edition de l'utilisateur"})}),r("div",{className:"col-span-full xl:col-auto",children:[e("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:r("div",{className:"items-center sm:flex xl:block 2xl:flex sm:space-x-4 xl:space-x-0 2xl:space-x-4",children:[e("img",{className:"mb-4 rounded-lg w-[64px] h-[64px] sm:mb-0 xl:mb-4 2xl:mb-0",src:`https://auth.frazionz.net/skins/face.php?u=${t.id}&s=120`,alt:"Jese picture"}),r("div",{children:[e("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t.name}),e("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.role.name})]})]})}),e("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:r("div",{className:"flow-root",children:[e("h3",{className:"text-xl font-semibold dark:text-white",children:"Sessions"}),e("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:u.map((a,s)=>e("li",{className:"py-4",children:r("div",{className:"flex items-center space-x-4",children:[e("div",{className:"flex-shrink-0",children:e("svg",{className:"w-6 h-6 dark:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),r("div",{className:"flex-1 min-w-0",children:[r("p",{className:"text-base font-semibold text-gray-900 truncate dark:text-white",children:[a.geo.city," - ",atob(a.ip)]}),r("p",{className:"text-sm font-normal text-gray-500 truncate dark:text-gray-400",children:[a.os," - ",a.useragent]})]}),e("div",{className:"inline-flex items-center",children:e("button",{onClick:()=>y({id:a.id,user_id:t.id}),className:"px-3 py-2 mb-3 mr-3 text-sm font-medium text-center text-gray-900 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 focus:ring-4 focus:ring-primary-300 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700",children:"Revoke"})})]})},s))})]})})]}),e("div",{className:"col-span-2",children:r("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[e("h3",{className:"mb-4 text-xl font-semibold dark:text-white",children:"Informations Général"}),e("form",{onSubmit:b,children:r("div",{className:"grid grid-cols-6 gap-6",children:[r("div",{className:"col-span-6 sm:col-span-3",children:[e("label",{htmlFor:"first-name",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Pseudo"}),e("input",{type:"text",onChange:a=>{l("username",a.target.value)},name:"first-name",id:"first-name",value:d.username,className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Bonnie",required:!0})]}),r("div",{className:"col-span-6 sm:col-span-3",children:[e("label",{htmlFor:"last-name",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Adresse Email"}),e("input",{type:"email",onChange:a=>{l("email",a.target.value)},name:"last-name",id:"last-name",value:d.email,className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Green",required:!0})]}),r("div",{className:"col-span-6 sm:col-span-3",children:[e("label",{htmlFor:"country",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"UUID"}),e("input",{type:"text",name:"country",id:"country",disabled:!0,value:t.uuid,className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"United States",required:!0})]}),r("div",{className:"col-span-6 sm:col-span-3",children:[e("label",{htmlFor:"city",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Points boutique"}),e("input",{type:"number",onChange:h,name:"city",id:"city",value:d.money,className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"e.g. San Francisco",required:!0})]}),r("div",{className:"col-span-6 sm:col-span-3",children:[e("label",{htmlFor:"city",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Est bannis ?"}),r(N,{onChange:a=>{l("banned",a.target.value)},value:d.banned,required:!0,children:[e("option",{value:"1",children:"Oui"}),e("option",{value:"0",children:"Non"})]})]}),r("div",{className:"col-span-6 sm:col-span-3",children:[e("label",{htmlFor:"address",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Inscrit depuis le"}),e("input",{type:"text",name:"address",id:"address",disabled:!0,value:n(t.created_at).local("fr").tz("Europe/Paris").format("D MMMM YYYY"),className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"e.g. California",required:!0})]}),e("div",{className:"col-span-6 sm:col-full",children:e("button",{className:"text-white bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",type:"submit",children:"Sauvegarder"})})]})})]})})]})]})}export{z as default};
