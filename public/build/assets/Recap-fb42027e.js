import{W as y,r as d,c as S,j as r,a as s}from"./app-224f2270.js";import{F as C}from"./FzToast-813026fc.js";import{B as T}from"./Toast-af3afca9.js";import"./bubble_warning-9cee2399.js";import"./bubble_infos-3d3cb710.js";import"./iconBase-8021c47a.js";function W({navigation:j,recapData:e,handleNext:v}){var g,k,p;const n=y().props.repos,l=y().props.subasset;let c=(g=n.branches[e.branchSelect])==null?void 0:g.name,o=c.split("/");o.forEach(t=>{t=t.charAt(0).toUpperCase()+t.slice(1)});let b=o.join("-"),a=((k=l[e==null?void 0:e.typeAssetSelect])==null?void 0:k.charAt(0).toUpperCase())+((p=l[e==null?void 0:e.typeAssetSelect])==null?void 0:p.slice(1)),x=a+"_",h=(l[e==null?void 0:e.typeAssetSelect]!==void 0?x:"")+e.versionName+"-"+b;const[m,N]=d.useState(!0),[u,w]=d.useState(0);d.useEffect(()=>{S.get(route("admin.github.repos.tag.check",{id:n.name,tag:h})).then(t=>{t.data.id!==void 0&&typeof t.data.id=="number"&&N(!1),w(!0)})},[m]);const f=[{key:"Branche sélectionné",value:c,checked:!0,link:0},{key:"Type d'asset sélectionné",value:typeof a=="string"?a:"N/A",checked:!0,link:1},{key:"Tag final",value:h,checked:m,link:1},{key:"Numéro de la version",value:e.versionName,checked:!0,link:1}],A=()=>{if(f.find(i=>i.checked===!1)!==void 0)return C.error("Impossible de créer une release, l'une des valeurs est invalide !");v()};return r("div",{className:"flex gap-4 flex-col",id:"branch_select",children:[r("div",{className:"flex flex-col",children:[s("h6",{className:"text-base text-[#fff]",style:{fontWeight:"600"},children:"Récapitulatif de la Release"}),s("i",{className:"text-white",children:"Vérifier les infos avant la création de la release"})]}),s("table",{className:"min-w-full divide-y divide-gray-200 table-fixed dark:divide-gray-600",children:r("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:[f.map((t,i)=>r("tr",{className:` ${t.checked?"hover:bg-gray-100 dark:hover:bg-gray-700 dark:bg-transparent":"dark:hover:bg-red-900 dark:bg-red-900"}`,children:[s("td",{className:"p-4 text-base font-medium text-gray-900 whitespace-nowrap dark:text-white",children:t.key}),s("td",{className:"p-4 text-base font-medium text-gray-900 whitespace-nowrap dark:text-white",children:t.value})]},i)),r("tr",{className:"hover:bg-gray-100 dark:hover:bg-gray-700",children:[s("td",{className:"p-4 text-base font-medium text-gray-900 whitespace-nowrap dark:text-white",children:"Fichier(s) à upload"}),s("td",{className:"p-4 text-base font-medium text-gray-900 whitespace-nowrap dark:text-white",children:s("ul",{children:e.filesAssets.map((t,i)=>s("li",{children:t.name},i))})})]})]})}),s(T,{disabled:!u,className:"w-1/5",onClick:A,children:u==!1?"Vérification en cours":"Créer la release"})]})}export{W as default};
