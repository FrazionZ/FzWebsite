import{R as m,r as v,j as u,a,n as D,F as b,g as E}from"./app-b9fa2a5c.js";import{A as S}from"./AdminLayout-1bcde9c8.js";import{m as R}from"./fr-0f5c5dd3.js";import{B as C}from"./Toast-cb536801.js";import f from"./RoleCard-a2e6a36c.js";import"./FzToastContainer-f656a1dc.js";import"./logo-ec0c8240.js";import"./index.esm-44803543.js";import"./iconBase-090ce01b.js";class N extends m.Component{render(){return m.createElement("div",{draggable:!0,onDragStart:this.props.dragStart,onDragEnter:this.props.dragEnter,onDragEnd:this.props.dragEnd,className:"grabbable"},this.props.children)}}function d(r,i,e){return i in r?Object.defineProperty(r,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[i]=e,r}class y extends v.Component{constructor(...i){super(...i),d(this,"state",{divs:[],currentDiv:null,toDiv:null}),d(this,"componentDidMount",()=>{this.setState({divs:this.props.children})}),d(this,"insertElementBefore",()=>{var c;let e=[...this.state.divs],n=this.state.currentDiv,o=this.state.toDiv,h;n!==o&&(h={...e[n]},e=e.filter((p,g)=>g!==n),e.splice(o,0,h),this.setState({divs:[],currentDiv:null,toDiv:null},()=>{this.setState({divs:e})})),(c=this.props)!=null&&c.onPosChange&&this.props.onPosChange(n,o,h)}),d(this,"dragStart",e=>{this.setState({currentDiv:e})}),d(this,"dragEnter",e=>{this.setState({toDiv:e})}),d(this,"dragDrop",()=>{this.insertElementBefore()})}render(){let i=[];for(let e=0;e<this.state.divs.length;e++)i.push(m.createElement(N,{dragStart:()=>this.dragStart(e),dragEnter:()=>this.dragEnter(e),dragEnd:this.dragDrop,key:e},this.state.divs[e]));return m.createElement(m.Fragment,null,i)}}const w=y;R.locale("fr");function P(r){let i="Rôles";const[e,n]=v.useState(r.roles),[o,h]=v.useState([]);let c=r.auth.permissions,p=r.authRoleHigh;e.map((t,s)=>{if(t.level>=5||p.position>=t.position){let l=o;l.push(t),h(l),delete e[s],n(e)}}),console.log(o),Array.prototype.swap=function(t,s){var l=this[t];return this[t]=this[s],this[s]=l,this};async function g(t,s){console.log(t,s);let l=e;l=l.swap(s,t),l[s].position=s,l[t].position=t,n(l)}async function x(){E.post(route("admin.roles.swap"),{roles:e,_token:r.csrf_token},{onSuccess:t=>{console.log(t)}})}return u(S,{children:[a(D,{title:i}),u("div",{className:"p-10",children:[a("h1",{className:"text-3xl text-white mb-5",children:i}),u("div",{className:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:gap-10 dark:bg-gray-900",children:[u("div",{className:"col-span-1",children:[o.map((t,s)=>a(f,{authRoleHigh:p,role:t},s)),c.includes("admin.role.swap")==!0&&a(w,{onPosChange:g,children:e.map((t,s)=>{if(t.level<5)return a(f,{authRoleHigh:p,role:t},s)})}),c.includes("admin.role.swap")==!1&&a(b,{children:e.map((t,s)=>{if(t.level<5)return a(f,{authRoleHigh:p,role:t},s)})}),a("div",{className:"flex justify-end",children:a(C,{onClick:x,children:"Sauvegarder"})})]}),u("div",{className:"col-span-1 flex flex-col justify-center gap-5 border-gray-800 border-l pl-6",children:[a("h2",{className:"text-3xl text-white",children:"Comment fonctionne les rôles ?"}),a("h4",{className:"text-1xl text-white",children:"L'ordre d'affichage des cartes forment la hiérarchie des rôles. Plus un rôle est haut, plus il a de pribilèges. (NB. Si vous avez la permission d'éditer les permissions et les rôles, vous ne pouvez pas éditer vos propres rôles ni les rôles au dessus des votres)"})]})]})]})]})}export{P as default};
