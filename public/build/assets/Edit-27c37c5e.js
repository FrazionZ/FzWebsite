import{r as i,K as k,j as a,a as e,n as f,c as v}from"./app-f9d8d0b0.js";import{A as N}from"./AdminLayout-7b0ed4ae.js";import{m}from"./fr-065809b1.js";import{a as n}from"./Toast-0561f8d9.js";import"./FzToastContainer-0a967216.js";import"./logo-ec0c8240.js";import"./index.esm-51481e65.js";m.locale("fr");function j(o){const[t,c]=i.useState(o.user);let u=t.name;const[g,h]=i.useState(o.tokenUsers),{data:s,setData:d,post:p,processing:w,errors:S}=k({id:t.id,username:t.name,email:t.email,money:t.money,banned:t.banned,role:t.role.id,_token:o.csrf_token});async function b(){const r=Math.max(0,Math.min(999999999,Number(event.target.value)));d("money",r)}async function y(r){r.preventDefault(),p(route("admin.users.edit.save"),{preserveScroll:!0,preserveState:!0,onSuccess:l=>{c(l.props.user)},onError:()=>{}})}async function x(r){v.post(route("admin.users.token.revoke"),r,{preserveState:!0,preserveScroll:!0,resetOnSuccess:!0,onFinish:l=>{},onSuccess:l=>{h(l.props.tokenUsers)},onError:l=>{}})}return a(N,{children:[e(f,{title:u}),a("div",{className:"grid grid-cols-1 px-4 pt-6 xl:grid-cols-3 xl:gap-4 dark:bg-gray-900",children:[e("div",{className:"mb-4 col-span-full xl:mb-2",children:e("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"Edition de l'utilisateur"})}),a("div",{className:"col-span-full xl:col-auto",children:[e("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:a("div",{className:"items-center sm:flex xl:block 2xl:flex sm:space-x-4 xl:space-x-0 2xl:space-x-4",children:[e("img",{className:"mb-4 rounded-lg w-[64px] h-[64px] sm:mb-0 xl:mb-4 2xl:mb-0",src:`https://auth.frazionz.net/skins/face.php?u=${t.id}&s=120`,alt:"Jese picture"}),a("div",{children:[e("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t.name}),e("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.role.name})]})]})}),e("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:a("div",{className:"flow-root",children:[e("h3",{className:"text-xl font-semibold dark:text-white",children:"Sessions"}),e("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:g.map((r,l)=>e("li",{className:"py-4",children:a("div",{className:"flex items-center space-x-4",children:[e("div",{className:"flex-shrink-0",children:e("svg",{className:"w-6 h-6 dark:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),a("div",{className:"flex-1 min-w-0",children:[a("p",{className:"text-base font-semibold text-gray-900 truncate dark:text-white",children:[r.geo.city," - ",atob(r.ip)]}),a("p",{className:"text-sm font-normal text-gray-500 truncate dark:text-gray-400",children:[r.os," - ",r.useragent]})]}),e("div",{className:"inline-flex items-center",children:e("button",{onClick:()=>x({id:r.id,user_id:t.id}),className:"px-3 py-2 mb-3 mr-3 text-sm font-medium text-center text-gray-900 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 focus:ring-4 focus:ring-primary-300 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700",children:"Revoke"})})]})},l))})]})})]}),e("div",{className:"col-span-2",children:a("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[e("h3",{className:"mb-4 text-xl font-semibold dark:text-white",children:"Informations Général"}),e("form",{onSubmit:y,children:a("div",{className:"grid grid-cols-6 gap-6",children:[a("div",{className:"col-span-6 sm:col-span-3",children:[e("label",{htmlFor:"name",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Pseudo"}),e("input",{type:"text",onChange:r=>{d("username",r.target.value)},name:"first-name",id:"name",value:s.username,className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Pseudo",required:!0})]}),a("div",{className:"col-span-6 sm:col-span-3",children:[e("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Adresse Email"}),e("input",{type:"email",onChange:r=>{d("email",r.target.value)},name:"email",id:"email",value:s.email,className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Email",required:!0})]}),a("div",{className:"col-span-6 sm:col-span-3",children:[e("label",{htmlFor:"uuid",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"UUID"}),e("input",{type:"text",name:"uuid",id:"uuid",disabled:!0,value:t.uuid,className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"N/A",required:!0})]}),a("div",{className:"col-span-6 sm:col-span-3",children:[e("label",{htmlFor:"money",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Points boutique"}),e("input",{type:"number",onChange:b,name:"money",id:"money",value:s.money,className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"N/A",required:!0})]}),a("div",{className:"col-span-6 sm:col-span-3",children:[e("label",{htmlFor:"banned",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Rôle"}),e(n,{onChange:r=>{d("role",r.target.value)},value:s.role,required:!0,children:o.roles.map((r,l)=>e("option",{value:r.id,children:r.name},l))})]}),a("div",{className:"col-span-6 sm:col-span-3",children:[e("label",{htmlFor:"role",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Est bannis ?"}),a(n,{onChange:r=>{d("banned",r.target.value)},value:s.banned,required:!0,children:[e("option",{value:"1",children:"Oui"}),e("option",{value:"0",children:"Non"})]})]}),a("div",{className:"col-span-6 sm:col-full",children:[e("label",{htmlFor:"createdat",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Inscrit depuis le"}),e("input",{type:"text",name:"createdat",id:"createdat",disabled:!0,value:m(t.created_at).local("fr").tz("Europe/Paris").format("D MMMM YYYY"),className:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"N/A",required:!0})]}),e("div",{className:"col-span-6 sm:col-full",children:e("button",{className:"text-white bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",type:"submit",children:"Sauvegarder"})})]})})]})})]})]})}export{j as default};
