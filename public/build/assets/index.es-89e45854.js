import{r as s,b as H}from"./app-672b5057.js";function j(t,r){var o={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.indexOf(e)<0&&(o[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(t);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(t,e[n])&&(o[e[n]]=t[e[n]])}return o}const D="https://embed.twitch.tv/embed/v1.js",I={HEIGHT:480,WIDTH:940},R={TWITCH_EMBED:"twitch-embed",TWITCH_PLAYER:"twitch-player"},S=!0,_=!0,k=!0,M=!1,W=!0,x="0h0m0s",B=!1,F=t=>{const[r,o]=s.useState({loading:!0,error:null});return s.useEffect(()=>{if(!t)return void o({loading:!1,error:new Error("No src provided to useScript.")});let e=document.querySelector(`script[src="${t}"]`);e?o(i=>Object.assign(Object.assign({},i),{loading:e.getAttribute("data-loading")==="true"})):(e=document.createElement("script"),e.src=t,e.async=!0,e.type="text/javascript",e.setAttribute("data-loading","true"),document.body.appendChild(e),e.addEventListener("load",()=>{e==null||e.setAttribute("data-loading","false")},{once:!0}),e.addEventListener("error",()=>{e==null||e.setAttribute("data-loading","false")},{once:!0}));const n=i=>{i.type==="load"?o({loading:!1,error:null}):i.type==="error"&&o({loading:!1,error:new Error(`There was an error loading the script for ${t}`)})};return e.addEventListener("load",n),e.addEventListener("error",n),()=>{e==null||e.removeEventListener("load",n),e==null||e.removeEventListener("error",n)}},[t]),r},Y=t=>{const r=s.useRef();return s.useEffect(()=>{r.current=t},[t]),r.current},G=(t,r,o)=>{for(const e in t)if(t[e]!==r[e]&&!o.includes(e))return!0;return!1},N=t=>{const r=document.getElementById(t);r&&(r.innerHTML="")},U={allowFullscreen:S,autoplay:_,withChat:k,muted:M,darkMode:W,time:x,hideControls:B,onAuthenticate:(t,r)=>{},onVideoPlay:(t,r)=>{},onVideoPause:t=>{},onVideoReady:t=>{},id:R.TWITCH_EMBED,height:I.HEIGHT,width:I.WIDTH},$=["channel","video","collection","height","width"],q=t=>{const{allowFullscreen:r,autoplay:o,channel:e,video:n,collection:i,withChat:y,muted:g,parent:h,darkMode:m,time:w,hideControls:f,onAuthenticate:b,onVideoPlay:P,onVideoPause:T,onVideoReady:O,id:p,height:A,width:L}=t,V=j(t,["allowFullscreen","autoplay","channel","video","collection","withChat","muted","parent","darkMode","time","hideControls","onAuthenticate","onVideoPlay","onVideoPause","onVideoReady","id","height","width"]),{loading:E,error:v}=F(D),a=Y(t),u=s.useRef(),C=s.useCallback(d=>{N(p);const l=new d(p,{allowfullscreen:r,autoplay:o,channel:e,video:n,collection:i,layout:y?"video-with-chat":"video",muted:g,parent:typeof h=="string"?[h]:h,theme:m?"dark":"light",time:w,controls:!f,height:"100%",width:"100%"});return l.addEventListener(d.AUTHENTICATE,c=>b(l,c)),l.addEventListener(d.VIDEO_PLAY,c=>P(l,c)),l.addEventListener(d.VIDEO_PAUSE,()=>T(l)),l.addEventListener(d.VIDEO_READY,()=>O(l)),l},[r,o,e,n,i,y,g,h,m,w,f,b,T,P,O,p]);return s.useEffect(()=>{E||(v?console.error(v):u.current&&!((d,l)=>{var c;return G((c=d)!==null&&c!==void 0?c:{},l,$)})(a,t)?(e&&(a==null?void 0:a.channel)!==e&&u.current.getPlayer().setChannel(e),n&&(a==null?void 0:a.video)!==n&&u.current.getPlayer().setVideo(n,0),i&&(a==null?void 0:a.collection)!==i&&u.current.getPlayer().setCollection(i,n)):u.current=C(window.Twitch.Embed))},[e,i,C,v,E,a,t,n]),E?null:H.createElement("div",Object.assign({id:p,style:{height:A,width:L}},V))};q.defaultProps=U;export{q as W};
