import{r as c,b as A,j as f,a as u,n as K,F as L,g as T}from"./app-672b5057.js";import{L as U}from"./Layout-3ca0b6bc.js";import"./logo-ec0c8240.js";import"./FzToastContainer-cac936b9.js";import"./iconBase-50bc53c2.js";import"./FzToast-684b824e.js";import"./bubble_warning-9cee2399.js";import"./bubble_infos-3d3cb710.js";import"./motion-8d78cff3.js";import"./Dropdown-9b0b5663.js";import"./index.esm-5374c5b9.js";import"./commentForum-5f640902.js";import"./keyboard-f708b31e.js";import"./transition-a48ecbed.js";import"./index-7614422b.js";/* empty css            */import"./twitch-bbd8d24a.js";var V=["alpha","numeric","alphanumeric"],z={alpha:{type:"text",inputMode:"text",pattern:"[a-zA-Z]{1}"},alphanumeric:{type:"text",inputMode:"text",pattern:"[a-zA-Z0-9]{1}"},numeric:{type:"tel",inputMode:"numeric",pattern:"[0-9]{1}",min:"0",max:"9"}},Z=c.forwardRef(function(a,m){var d=a.allowedCharacters,p=d===void 0?"alphanumeric":d,s=a.ariaLabel,v=a.autoFocus,g=v===void 0?!0:v,h=a.containerClassName,y=a.disabled,C=a.inputClassName,x=a.isPassword,l=x===void 0?!1:x,E=a.length,F=E===void 0?6:E,D=a.placeholder,k=a.onChange;if(isNaN(F)||F<1)throw new Error("Length should be a number and greater than 0");if(!V.some(function(i){return i===p}))throw new Error("Invalid value for allowedCharacters. Use alpha, numeric, or alphanumeric");var n=c.useRef([]),b=z[p];c.useImperativeHandle(m,function(){return{focus:function(){n.current&&n.current[0].focus()},clear:function(){if(n.current){for(var e=0;e<n.current.length;e++)n.current[e].value="";n.current[0].focus()}w()}}}),c.useEffect(function(){g&&n.current[0].focus()},[]);for(var w=function(){var e=n.current.map(function(o){return o.value}).join("");k&&k(e)},P=function(e){var o=e.target,t=o.value,r=o.nextElementSibling;t.length>1?(e.target.value=t.charAt(0),r!==null&&r.focus()):t.match(b.pattern)?r!==null&&r.focus():e.target.value="",w()},R=function(e){var o=e.key,t=e.target;if(o==="Backspace"){if(t.value===""){if(t.previousElementSibling!==null){var r=t.previousElementSibling;r.value="",r.focus(),e.preventDefault()}}else t.value="";w()}},$=function(e){e.target.select()},j=function(e){for(var o=e.clipboardData.getData("Text"),t=0,r=0;r<o.length;r++){var S=o.charAt(r),I=n.current[t].value;S.match(b.pattern)&&(I||(n.current[t].value=S,n.current[t].nextElementSibling!==null&&(n.current[t].nextElementSibling.focus(),t++)))}w(),e.preventDefault()},O=[],M=function(e){O.push(A.createElement("input",Object.assign({key:e,onChange:P,onKeyDown:R,onFocus:$,onPaste:j},b,{type:l?"password":b.type,ref:function(t){n.current[e]=t},maxLength:1,className:C,autoComplete:e===0?"one-time-code":"off","aria-label":s?s+". Character "+(e+1)+".":"Character "+(e+1)+".",disabled:y,placeholder:D})))},N=0;N<F;N++)M(N);return A.createElement("div",{className:h},O)});const B=Z;function se(a){let m="Se Connecter";const[d,p]=c.useState(!1),[s,v]=c.useState(0),[g,h]=c.useState();async function y(l){await h(l),l!==void 0&&l.length==6&&C(l)}async function C(l){p(!0),T.post(route("2fa.handleLogin"),{code:l,typeCode:s,_token:a.csrf_token},{onFinish:()=>{p(!1)}})}async function x(){h(null),v(s!==0?0:1)}return f(U,{props:a,title:m,header:u("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Profile"}),children:[u(K,{title:m}),f("div",{className:"flex flex-col items-center gap-[48px]",children:[f("div",{className:"form-group",children:[s==0&&f(L,{children:[u("label",{children:"Code 2FA"}),u(B,{autoFocus:!0,containerClassName:"flex gap-[24px]",disabled:d,length:"6",allowedCharacters:"numeric",inputClassName:"w-[80px] h-[78px]",onChange:y})]}),s==1&&f(L,{children:[u("label",{children:"Code de secours"}),u("input",{type:"text",value:g,onChange:l=>h(l.target.value),name:"code_backup"})]}),u("span",{className:"text-center text-[var(--color-2)] mt-8 text-lg cursor-pointer select-none",autoFocus:!0,onClick:x,children:s==0?"Utiliser un code de secours":"Utiliser le code 2FA"})]}),u("button",{id:"buttonLoginAuth",disabled:d,className:"btn w-fit",onClick:()=>C(g),children:"VÃ©rifier le code"})]})]})}export{se as default};
