import{a as e,j as t,r as l,W as x,b as N,F as b}from"./app-8a029f7d.js";import{L as y}from"./Layout-2f073039.js";import"./FzToast-d4c5c987.js";import{A as n}from"./Alert-dbe226b5.js";import{B as C}from"./Badge-d2135d1d.js";import{m as w}from"./fr-c5bef879.js";import{B as S}from"./bubble_infos-3d3cb710.js";import{E as j}from"./envelope_open-354a45b7.js";import"./Editor-3d116889.js";import"./logo-5fe7a993.js";import"./dropdownProfile-650342e3.js";import"./iconBase-dd4e59c0.js";import"./motion-9a42dd72.js";import"./Dropdown-488d9f93.js";import"./index.esm-cd877123.js";import"./commentForum-5f640902.js";import"./keyboard-bf1bc54e.js";import"./transition-629d5e4e.js";import"./index-46d27db1.js";import"./FzToastContainer-ac00f5d7.js";/* empty css            */import"./twitch-1c54e372.js";import"./bubble_warning-9cee2399.js";import"./index-4d501b15.js";import"./objectWithoutPropertiesLoose-df62547b.js";import"./index-4ec4934b.js";w.locale("fr");function k({comment:a}){return e("div",{className:"card candidate comment",children:t("div",{className:"card-body",children:[e("div",{className:"avatar",children:e("img",{src:`https://auth.frazionz.net/skins/face.php?u=${a.uid}`,alt:"avatar_user"})}),t("div",{className:"infos",children:[t("div",{className:"user",children:[e("span",{children:a.user.name}),e(C,{message:a.user.role.name,styleBadge:{background:a.user.role.color}})]}),e("div",{className:"comment",children:a.comment})]})]})})}const _="/build/assets/comment-ca590223.svg";function re(a){let o="Candidature",c=a.auth;const[p,B]=l.useState(a.category),[r,E]=l.useState(a.candidate),[d,f]=l.useState(a.comments);l.useState(!1);const{data:h,setData:m,post:v,processing:u,errors:A}=x({cid:r.id,comment:"",_token:a.csrf_token});async function g(s){s.preventDefault(),v(route("candidate.handleComment"),{preserveScroll:!0,preserveState:!0,onSuccess:i=>{f(i.props.comments),m("comment","")},onError:()=>{}})}return t(y,{title:o,props:a,children:[e(N,{title:o}),t("div",{className:"flex flex-col gap-[120px]",children:[t("div",{className:"flex flex-col gap-[30px]",children:[t("div",{className:"justify-start icon_title w-full",children:[e("img",{src:S,alt:""}),e("span",{children:"Information"})]}),e(n,{state:"infos",children:p.show}),t("div",{className:"flex gap-8",children:[t("div",{className:"form-group w-1/2",children:[e("label",{children:"Pseudo"}),e("input",{type:"text",disabled:!0,value:r.upseudo})]}),t("div",{className:"form-group w-full",children:[e("label",{children:"Rôle souhaité"}),e("input",{type:"text",disabled:!0,value:r.rank})]})]}),(c.isAdmin==!0||c.user.id==r.uid)&&t(b,{children:[t("div",{className:"flex gap-8",children:[t("div",{className:"form-group w-full",children:[t("label",{children:["Tag Discord"," ",e("span",{className:"text-sm",children:"*"})]}),e("input",{type:"text",disabled:!0,value:r.discordtag})]}),t("div",{className:"form-group w-1/2",children:[t("label",{children:["Âge ",e("span",{className:"text-sm",children:"*"})]}),e("input",{type:"text",disabled:!0,value:r.age})]})]}),e("span",{className:"flex justify-end text-sm",children:"*Ces informations ne sont visibles que par vous et le Staff."})]})]}),t("div",{className:"flex flex-col gap-[30px]",children:[t("div",{className:"justify-start icon_title w-full",children:[e("img",{src:j,alt:""}),e("span",{children:"Présentation"})]}),e("div",{className:"card ",children:e("div",{className:"card-body overflow-y-auto max-h-[800px] pr-5",style:{wordWrap:"break-word"},dangerouslySetInnerHTML:{__html:r.present}})})]}),t("div",{className:"flex flex-col gap-[20px]",children:[t("div",{className:"justify-start icon_title w-full",children:[e("img",{src:_,alt:""}),e("span",{children:"Commentaires"})]}),d.map((s,i)=>e(k,{comment:s},i)),d.length==0&&e(n,{state:"infos",children:"Aucun commentaire n'a été posté"}),r.locked==!0&&e(n,{state:"error",children:'Cette candidature est verrouillée, vous ne pouvez plus commenter"'}),r.locked==!1&&t("form",{onSubmit:g,className:"flex flex-col gap-5",children:[t("div",{className:"form-group",children:[e("label",{children:"Rédaction de votre commentaire"}),e("textarea",{className:"h-9",disabled:u,value:h.comment,onChange:s=>{m("comment",s.target.value)}})]}),e("button",{type:"submit",disabled:u,className:"flex justify-center btn",children:"Envoyer"})]})]})]})]})}export{re as default};
