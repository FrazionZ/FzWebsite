import{W as x,_ as g,j as l,a as e}from"./app-224f2270.js";import{E as v}from"./Editor-9b469725.js";import{F as _}from"./FzToast-813026fc.js";import"./Editor-01a75d7e.js";import"./bubble_warning-9cee2399.js";import"./bubble_infos-3d3cb710.js";import"./objectWithoutPropertiesLoose-df62547b.js";import"./index-4d501b15.js";import"./index-f6182268.js";function R({thread:a,setThread:p,afterCommentPublish:u}){const f=x().props,{data:t,setData:o,post:d,processing:m,errors:y}=g({th_id:a.id,comment:"",_token:f.csrf_token});function h(){return t.comment.replace(/<(.|\n)*?>/g,"").trim().length===0&&!t.comment.includes("<img")}async function b(r){if(r.preventDefault(),h()){_.error("Votre commentaire est vide.");return}d(route("forum.thread.comment.publish"),{preserveScroll:!0,onSuccess:s=>{var n,i,c;p((n=s.props.flash)==null?void 0:n.dataReset),o("comment",""),u((c=(i=s.props.flash)==null?void 0:i.dataReset)==null?void 0:c.comments)},onError:()=>{o("comment","")}})}return l("form",{onSubmit:b,className:"flex flex-col gap-5",children:[l("div",{className:"form-group",children:[e("label",{children:"Votre commentaire"}),e("div",{className:"flex flex-col",children:e(v,{showToolbar:!1,processing:m,state:t.comment,onChange:r=>{o("comment",r)}})})]}),e("button",{type:"submit",disabled:m,className:"flex justify-center btn",children:"Envoyer"})]})}export{R as default};
