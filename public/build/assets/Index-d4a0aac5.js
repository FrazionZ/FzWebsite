import{W as y,a as t,j as s,d as p,r as d,F as u,b as A,n as w}from"./app-71455080.js";import{L as _}from"./Layout-9c6f97a0.js";import{e as M}from"./Toast-42c82b9f.js";import k from"./Settings-01a687d4.js";import{B as b}from"./Badge-66b031a5.js";import{m as N}from"./fr-f9dbd262.js";import{S as L}from"./Spinner-7f0dfb7d.js";import{P as v}from"./pnotes-8a5673d8.js";import{C as S}from"./comment-pen-d2ca9284.js";import{A as n}from"./Alert-7cb287a7.js";import"./logo-5fe7a993.js";import"./dropdownProfile-b7601297.js";import"./iconBase-e8b875ef.js";import"./motion-67847c99.js";import"./Dropdown-0b37bd09.js";import"./index.esm-f4450869.js";import"./commentForum-5f640902.js";import"./keyboard-49518c1f.js";import"./transition-1d4ad1bd.js";import"./index-d5c08679.js";import"./FzToastContainer-2d515a7f.js";import"./FzToast-68d30c0b.js";import"./bubble_warning-9cee2399.js";import"./bubble_infos-3d3cb710.js";/* empty css            */import"./twitch-a961c6b4.js";import"./switch-0af9bfe1.js";import"./index-4d501b15.js";const j="/build/assets/eye-c899f3f2.svg",z="/build/assets/eye-crossed-14d010dd.svg";N.locale("fr");function J({funcParse:l,candid:e,canManage:r}){y().props;function a(i){return i.replaceAll("January","Janvier").replaceAll("February","Février").replaceAll("March","Mars").replaceAll("April","Avril").replaceAll("May","Mai").replaceAll("June","Juin").replaceAll("July","Julliet").replaceAll("August","Août").replaceAll("September","Septembre").replaceAll("October","Octobre").replaceAll("November","Novembre").replaceAll("December","Décembre")}return t("div",{className:"card candidate item",children:s("div",{className:"card-body",children:[s("div",{className:"infos",children:[s("div",{className:"general",children:[s("div",{className:"username",children:[t(M,{content:e.public?"Public":"Non public",children:t("img",{style:{width:"32px"},src:e.public?j:z,alt:""})}),t("span",{children:e.upseudo})]}),s("span",{className:"date",children:["Publié le ",a(N(e.created_at).local("fr").tz("Europe/Paris").format("D MMMM YYYY"))]})]}),s("div",{className:"tag",children:[e.state==2&&e.substate==1&&t(b,{state:"error",size:"sm",message:"Refusée"}),e.state==2&&e.substate==0&&t(b,{state:"success",message:"Acceptée",size:"sm"})]})]}),s("div",{className:"actions",children:[t(p,{className:"btn",href:route("candidate.show",{id:e.id}),children:"Visionner"}),r==!0&&t(k,{funcParse:l,candid:e})]})]})})}function F({funcParse:l,category:e}){const[r,a]=d.useState(e.candids.prev_page_url),[i,c]=d.useState(e.candids.current_page),[m,h]=d.useState(e.candids.next_page_url);async function f(P){a(null),h(null),l.setLoading(e.id,!0).then(async()=>{let g=P=="prev"?i-1:i+1,o=await axios.get("/candidate/paginate/"+e.id+"/"+g);o.status==200&&(a(o.data.prev_page_url),h(o.data.next_page_url),c(g),l.setPageCategory(e.id,o.data)),l.setLoading(e.id,!1)})}return t(u,{children:e.candids.last_page>1&&s("div",{className:"paginate candidate",children:[t("button",{className:"btn",onClick:()=>{f("prev")},disabled:r==null,children:"<"}),t("button",{className:"btn",children:i}),t("button",{className:"btn",onClick:()=>{f("next")},disabled:m==null,children:">"})]})})}const C="/build/assets/clock-0fa3135e.svg",x="/build/assets/time_fast-564a17ef.svg";class ce extends A.Component{constructor(e){super(e),this.title="Rejoindre notre équipe";for(const[r,a]of this.props.categories.entries())switch(r){case 0:a.icon=C,a.load=!1;break;case 1:a.icon=x,a.load=!1;break;case 2:a.icon=v,a.load=!1;break}this.state={categories:this.props.categories},this.reloadCandidature=this.reloadCandidature.bind(this),this.setPageCategory=this.setPageCategory.bind(this),this.setLoading=this.setLoading.bind(this),this.funcParse={setLoading:this.setLoading,reloadCandidature:this.reloadCandidature,setPageCategory:this.setPageCategory}}async initCategory(e){for await(const[r,a]of e.entries())switch(r){case 0:a.icon=C,a.load=!1;break;case 1:a.icon=x,a.load=!1;break;case 2:a.icon=v,a.load=!1;break}return e}async setLoading(e,r){let a=this.state.categories,i=a[e];return i.load=r,new Promise((c,m)=>{this.setState({categories:a},c())})}async setPageCategory(e,r){let a=this.state.categories,i=a[e];i.candids=r,this.setState({categories:a})}async reloadCandidature(e){let r=await this.initCategory(e);this.setState({categories:r})}render(){return s(_,{title:this.title,props:this.props,children:[t(w,{title:this.title}),s("div",{className:"flex flex-col gap-[120px]",children:[s("div",{className:"flex gap-[30px] flex-col items-center",children:[s("div",{className:"justify-start icon_title w-full",children:[t("img",{src:S,alt:""}),t("span",{children:"Candidater"})]}),this.props.feature==!1&&t(n,{className:"w-full",state:"error",children:"Les Candidatures sont temporairement désactivées."}),this.props.feature==!0&&this.props.candidCooldown==!0&&t(n,{className:"w-full",state:"error",children:"Votre précédente candidature a été traitée. Vous devez attendre 30 jours avant de postuler à nouveau"}),this.props.feature==!0&&this.props.candidAlreadyPost==!0&&t(n,{className:"w-full",state:"error",children:"Vous avez déjà envoyé une candidature, vous ne pouvez plus en poster pour le moment."}),this.props.feature==!0&&this.props.candidAlreadyPost==!1&&this.props.candidCooldown==!1&&s(u,{children:[t(n,{state:"infos",className:"w-full",children:s("span",{children:["Pour rejoindre notre équipe, merci de remplir le formulaire ci-dessous. Merci de suivre un maximum les conditions pour postuler.",t("br",{}),"Les conditions, et un exemple, sont présents sur ",t(p,{href:"#",children:"cette page."})]})}),t(p,{href:route("candidate.create"),className:"btn",children:"Postuler Maintenant"})]})]}),t("div",{className:"flex gap-[60px] flex-col",children:this.state.categories.map((e,r)=>s("div",{className:"flex flex-col gap-[30px]",children:[s("div",{className:"icon_title",children:[t("img",{src:e.icon,alt:""}),t("span",{children:e.display})]}),s("div",{className:"column flex flex-col gap-[24px]",children:[t(n,{state:"infos",children:e.info}),e.load==!0&&t(u,{children:s("div",{className:"flex justify-center items-center gap-5 py-20",children:[t(L,{"aria-label":"Center-aligned spinner example"}),t("span",{className:"text-xl",children:"Chargement"})]})}),e.load==!1&&e.candids.data.map((a,i)=>t(J,{funcParse:this.funcParse,canManage:this.props.canManageCandidate,candid:a},i)),t(F,{funcParse:this.funcParse,category:e})]})]},r))})]})]})}}export{ce as default};
